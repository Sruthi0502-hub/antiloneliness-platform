<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pallanguli ‚Äì Sentimate</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --brown: #7a5c38;
            --brown-d: #5c3d1e;
            --amber: #c0824a;
            --wheat: #fdf6ec;
            --cream: #fffbf6;
            --shadow: 0 8px 28px rgba(0, 0, 0, 0.10);
            --trans: 0.25s cubic-bezier(.4, 0, .2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--wheat);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ‚îÄ‚îÄ Navbar ‚îÄ‚îÄ */
        nav {
            background: var(--brown);
            padding: 14px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 3px 16px rgba(0, 0, 0, 0.16);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-60px);
                opacity: 0
            }

            to {
                transform: translateY(0);
                opacity: 1
            }
        }

        .brand {
            color: #fff;
            font-size: 1.5em;
            font-weight: 800;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            font-weight: 700;
            padding: 7px 16px;
            border-radius: 30px;
            margin-left: 10px;
            transition: background var(--trans);
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.18);
            color: #fff;
        }

        /* ‚îÄ‚îÄ Main layout ‚îÄ‚îÄ */
        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 28px 20px 48px;
            animation: fadeInUp 0.55s ease both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(24px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        h1 {
            font-size: 2.2em;
            color: var(--brown-d);
            font-weight: 800;
            margin-bottom: 4px;
        }

        .subtitle {
            color: #9a7a5a;
            font-size: 0.95em;
            font-weight: 600;
            margin-bottom: 22px;
        }

        /* ‚îÄ‚îÄ Status bar ‚îÄ‚îÄ */
        .status-bar {
            display: flex;
            gap: 32px;
            background: var(--cream);
            border-radius: 16px;
            padding: 14px 36px;
            box-shadow: var(--shadow);
            margin-bottom: 22px;
            font-size: 1.1em;
            font-weight: 700;
            color: var(--brown-d);
        }

        .status-bar span.val {
            color: var(--amber);
            font-size: 1.25em;
        }

        /* ‚îÄ‚îÄ Turn indicator ‚îÄ‚îÄ */
        .turn-pill {
            font-size: 1.05em;
            font-weight: 700;
            background: #fff8ec;
            border: 2px solid #deb882;
            color: var(--brown-d);
            padding: 9px 28px;
            border-radius: 30px;
            margin-bottom: 14px;
            transition: background var(--trans);
        }

        /* ‚îÄ‚îÄ Message ‚îÄ‚îÄ */
        .msg-box {
            display: none;
            background: #fff9e0;
            border: 2px solid #f0c860;
            border-radius: 14px;
            padding: 11px 28px;
            font-size: 1.05em;
            font-weight: 700;
            color: var(--brown-d);
            margin-bottom: 14px;
            animation: popIn 0.3s ease;
        }

        .msg-box.show {
            display: block;
        }

        @keyframes popIn {
            0% {
                transform: scale(0.85);
                opacity: 0
            }

            70% {
                transform: scale(1.04)
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        /* ‚îÄ‚îÄ Board ‚îÄ‚îÄ */
        .board-wrapper {
            background: linear-gradient(145deg, #b87a40, #8a5020);
            border-radius: 24px;
            padding: 22px 22px 18px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.22);
            margin-bottom: 22px;
        }

        .board-label {
            text-align: center;
            color: rgba(255, 255, 255, 0.65);
            font-size: 0.8em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .board-row {
            display: flex;
            gap: 10px;
            margin-bottom: 14px;
        }

        /* ‚îÄ‚îÄ Pits ‚îÄ‚îÄ */
        .pit {
            width: 68px;
            height: 68px;
            background: #fdf4e0;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 3px solid #c09060;
            transition: transform var(--trans), background var(--trans), box-shadow var(--trans);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .pit:hover:not(.empty) {
            background: #ffe8b0;
            transform: scale(1.13);
            box-shadow: 0 4px 16px rgba(192, 130, 74, 0.4), inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .pit:active:not(.empty) {
            transform: scale(0.95);
        }

        .pit.empty {
            cursor: default;
            opacity: 0.55;
        }

        .pit.selected {
            background: #ffe082;
            border-color: #f0a030;
            box-shadow: 0 0 0 4px rgba(240, 160, 40, 0.35);
        }

        .pit .seed-count {
            font-size: 1.35em;
            font-weight: 800;
            color: var(--brown-d);
        }

        .pit .seed-icon {
            font-size: 0.65em;
            color: #b07840;
            font-weight: 600;
        }

        /* ‚îÄ‚îÄ Stores ‚îÄ‚îÄ */
        .store-row {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .store {
            width: 100px;
            height: 76px;
            background: linear-gradient(145deg, #d4a46a, #b07840);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 3px solid #9a6030;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .store .slabel {
            font-size: 0.65em;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 700;
            text-transform: uppercase;
        }

        .store .scount {
            font-size: 2em;
            font-weight: 800;
            color: #fff;
            line-height: 1.1;
        }

        /* ‚îÄ‚îÄ Controls ‚îÄ‚îÄ */
        .controls {
            display: flex;
            gap: 14px;
            margin-bottom: 24px;
        }

        .btn {
            border: none;
            border-radius: 14px;
            padding: 14px 36px;
            font-size: 1.1em;
            font-weight: 700;
            font-family: 'Nunito', sans-serif;
            cursor: pointer;
            transition: transform var(--trans), box-shadow var(--trans);
        }

        .btn-reset {
            background: linear-gradient(135deg, #c0824a, #9a5828);
            color: #fff;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.04);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
        }

        .btn:active {
            transform: scale(0.96);
        }

        /* ‚îÄ‚îÄ Rules card ‚îÄ‚îÄ */
        .rules-card {
            background: var(--cream);
            border-radius: 18px;
            padding: 22px 30px;
            box-shadow: var(--shadow);
            max-width: 580px;
            width: 100%;
        }

        .rules-card h3 {
            color: var(--brown-d);
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .rules-card ul {
            color: #7a5c38;
            line-height: 2;
            padding-left: 18px;
            font-size: 0.97em;
        }

        @media(max-width:560px) {
            .pit {
                width: 50px;
                height: 50px;
            }

            .pit .seed-count {
                font-size: 1em;
            }

            .board-row {
                gap: 6px;
            }

            .board-wrapper {
                padding: 14px;
            }

            h1 {
                font-size: 1.7em;
            }
        }
    </style>
</head>

<body>

    <nav>
        <div class="brand">Sentimate</div>
        <div class="nav-links">
            <a href="/traditional_games">‚Üê Traditional</a>
            <a href="/games">All Games</a>
        </div>
    </nav>

    <div class="container">
        <h1>ü™® Pallanguli</h1>
        <p class="subtitle">Classic South Indian mancala ‚Äì sow &amp; capture the seeds!</p>

        <div class="status-bar">
            <div>You &nbsp;<span class="val" id="score-p1">0</span></div>
            <div>Computer &nbsp;<span class="val" id="score-p2">0</span></div>
            <div>Round &nbsp;<span class="val" id="round">1</span></div>
        </div>

        <div class="turn-pill" id="turn-text">üü¢ Your turn ‚Äì pick a pit!</div>
        <div class="msg-box" id="msg-box"></div>

        <div class="board-wrapper">
            <div class="board-label">Computer's Pits</div>
            <div class="board-row" id="row-p2"></div>

            <div class="store-row">
                <div class="store">
                    <div class="slabel">Computer</div>
                    <div class="scount" id="store-p2-count">0</div>
                </div>
                <div class="store">
                    <div class="slabel">You</div>
                    <div class="scount" id="store-p1-count">0</div>
                </div>
            </div>

            <div class="board-label" style="margin-top:14px;">Your Pits</div>
            <div class="board-row" id="row-p1"></div>
        </div>

        <div class="controls">
            <button class="btn btn-reset" onclick="resetGame()">üîÑ New Game</button>
        </div>

        <div class="rules-card">
            <h3>üìú How to Play</h3>
            <ul>
                <li>2 rows of 7 pits, each starting with <strong>6 seeds</strong>.</li>
                <li>Click one of <strong>your pits</strong> (bottom row) to sow seeds anti-clockwise.</li>
                <li>If the last seed lands on a non-empty pit ‚Üí continue sowing.</li>
                <li>If it lands on an <strong>empty pit</strong>, your turn ends.</li>
                <li>Empty pit + seeds opposite ‚Üí you <strong>capture</strong> them!</li>
                <li>Most seeds at the end wins! üèÜ</li>
            </ul>
        </div>
    </div>

    <script>
        const PITS = 7, SEEDS = 6;
        let board, stores, currentPlayer, gameOver, round;

        function initState() {
            board = [Array(PITS).fill(SEEDS), Array(PITS).fill(SEEDS)];
            stores = [0, 0]; currentPlayer = 0; gameOver = false; round = 1;
        }

        function render() {
            renderRow('row-p1', 0, true);
            renderRow('row-p2', 1, false);
            document.getElementById('store-p1-count').textContent = stores[0];
            document.getElementById('store-p2-count').textContent = stores[1];
            document.getElementById('score-p1').textContent = stores[0];
            document.getElementById('score-p2').textContent = stores[1];
            document.getElementById('round').textContent = round;
            document.getElementById('turn-text').textContent =
                gameOver ? 'üèÅ Game Over!' :
                    (currentPlayer === 0 ? 'üü¢ Your turn ‚Äì pick a pit!' : 'ü§ñ Computer thinking‚Ä¶');
        }

        function renderRow(rowId, player, clickable) {
            const el = document.getElementById(rowId); el.innerHTML = '';
            const pits = player === 1 ? [...board[1]].reverse() : board[0];
            const idx = player === 1 ? [...Array(PITS).keys()].map(i => PITS - 1 - i) : [...Array(PITS).keys()];
            pits.forEach((seeds, i) => {
                const pit = document.createElement('div');
                pit.className = 'pit' + (seeds === 0 ? ' empty' : '');
                pit.innerHTML = `<span class="seed-count">${seeds}</span><span class="seed-icon">seeds</span>`;
                if (clickable && !gameOver && currentPlayer === 0 && seeds > 0)
                    pit.addEventListener('click', () => playerMove(idx[i]));
                el.appendChild(pit);
            });
        }

        function sow(player, pitIndex) {
            let seeds = board[player][pitIndex]; board[player][pitIndex] = 0;
            let row = player, pos = pitIndex, lastRow, lastPos;
            while (seeds > 0) {
                if (row === 0) { pos++; } else { pos--; }
                if (row === 0 && pos >= PITS) { row = 1; pos = 0; }
                else if (row === 1 && pos < 0) { row = 0; pos = PITS - 1; }
                board[row][pos]++; seeds--; lastRow = row; lastPos = pos;
            }
            return { lastRow, lastPos };
        }

        function doMove(player, pitIndex) {
            let { lastRow, lastPos } = sow(player, pitIndex);
            while (board[lastRow][lastPos] > 1) {
                let res = sow(lastRow, lastPos); lastRow = res.lastRow; lastPos = res.lastPos;
            }
            if (board[lastRow][lastPos] === 1) {
                const oppRow = 1 - lastRow, oppPos = PITS - 1 - lastPos;
                if (board[oppRow][oppPos] > 0) {
                    stores[player] += board[lastRow][lastPos] + board[oppRow][oppPos];
                    board[lastRow][lastPos] = 0; board[oppRow][oppPos] = 0;
                    showMsg(player === 0 ? 'üéâ Capture! You grabbed seeds!' : 'ü§ñ Computer captured seeds!');
                }
            }
            checkGameOver();
        }

        function playerMove(pitIndex) {
            if (gameOver || currentPlayer !== 0) return;
            if (board[0][pitIndex] === 0) return;
            clearMsg(); doMove(0, pitIndex);
            if (!gameOver) { currentPlayer = 1; render(); setTimeout(computerMove, 900); }
            else render();
        }

        function computerMove() {
            if (gameOver) return;
            const avail = board[1].map((s, i) => s > 0 ? i : -1).filter(i => i >= 0);
            if (!avail.length) { checkGameOver(); render(); return; }
            const best = avail.reduce((a, b) => board[1][a] >= board[1][b] ? a : b);
            doMove(1, best); currentPlayer = 0; render();
        }

        function checkGameOver() {
            if (board[0].every(s => s === 0) || board[1].every(s => s === 0)) {
                board[0].forEach((s, i) => { stores[0] += s; board[0][i] = 0; });
                board[1].forEach((s, i) => { stores[1] += s; board[1][i] = 0; });
                gameOver = true;
                if (stores[0] > stores[1]) showMsg('üèÜ You win! Excellent!');
                else if (stores[1] > stores[0]) showMsg('ü§ñ Computer wins. Try again!');
                else showMsg("ü§ù It's a draw!");
            }
        }

        function showMsg(t) { const el = document.getElementById('msg-box'); el.textContent = t; el.classList.add('show'); }
        function clearMsg() { document.getElementById('msg-box').classList.remove('show'); }
        function resetGame() { if (!gameOver) round++; initState(); clearMsg(); render(); }

        initState(); render();
    </script>
</body>

</html>